import{_ as i,c as t,o as a,ae as o}from"./chunks/framework.Cqi9LMMK.js";const m=JSON.parse('{"title":"MDM PIN gate","description":"","frontmatter":{},"headers":[],"relativePath":"android-app/onboarding/mdm-pin-gate.md","filePath":"android-app/onboarding/mdm-pin-gate.md"}'),l={name:"android-app/onboarding/mdm-pin-gate.md"};function d(s,e,n,r,c,h){return a(),t("div",null,[...e[0]||(e[0]=[o('<h1 id="mdm-pin-gate" tabindex="-1">MDM PIN gate <a class="header-anchor" href="#mdm-pin-gate" aria-label="Permalink to &quot;MDM PIN gate&quot;">​</a></h1><h2 id="where-it-lives" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h2><ul><li><code>app/src/main/java/com/tripleu/ui/activities/AuthActivity.kt</code></li></ul><h2 id="what-it-does" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does" aria-label="Permalink to &quot;What it does&quot;">​</a></h2><ul><li>Requires the MDM PIN before entering the app.</li><li>Creates the PIN on first run if none exists.</li><li>Offers a recovery flow when the PIN is wrong or the device is locked out.</li></ul><h2 id="how-it-runs" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs" aria-label="Permalink to &quot;How it runs&quot;">​</a></h2><ul><li>If <code>mdm_pin</code> is missing: <ul><li>Prompts to set a new PIN.</li><li>Stores <code>mdm_pin</code> and <code>mdm_pin_hash</code> in <code>MDMSettings</code>.</li><li>Writes <code>auth.pin_sha256</code> to <code>ConfigStore</code>.</li></ul></li><li>If PIN exists: <ul><li>Validates against <code>mdm_pin</code> or <code>mdm_pin_hash</code>.</li><li>On success, sets <code>Session.isAuthenticated = true</code> and routes to: <ul><li><code>PermissionsCheckActivity</code> if <code>setup_complete=false</code>.</li><li><code>MainActivity</code> if setup is complete.</li></ul></li></ul></li><li>If PIN fails, calls the recovery flow (<code>validateRecoveryPin</code>).</li><li>Shows an Updates link when <code>allow_user_updates=true</code> to open <code>UpdatesGuestActivity</code>.</li><li>Provides a manual refresh button that calls <code>CloudSyncManager.manualSync()</code>.</li><li>Shows the device ID label at the bottom of the screen.</li></ul>',7)])])}const p=i(l,[["render",d]]);export{m as __pageData,p as default};
