import{_ as i,c as a,o as t,ae as l}from"./chunks/framework.Cqi9LMMK.js";const b=JSON.parse('{"title":"Accessibility helpers","description":"","frontmatter":{},"headers":[],"relativePath":"android-app/invisible-features/accessibility-helpers.md","filePath":"android-app/invisible-features/accessibility-helpers.md"}'),s={name:"android-app/invisible-features/accessibility-helpers.md"};function r(o,e,c,h,n,d){return t(),a("div",null,[...e[0]||(e[0]=[l('<h1 id="accessibility-helpers" tabindex="-1">Accessibility helpers <a class="header-anchor" href="#accessibility-helpers" aria-label="Permalink to &quot;Accessibility helpers&quot;">​</a></h1><h2 id="accessibility-auto-enable" tabindex="-1">Accessibility auto-enable <a class="header-anchor" href="#accessibility-auto-enable" aria-label="Permalink to &quot;Accessibility auto-enable&quot;">​</a></h2><h3 id="where-it-lives" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/accessibility/AccessibilityMonitorService.kt</code></li><li><code>app/src/main/java/com/tripleu/vpn/BootComplete.java</code></li><li><code>app/src/main/java/com/tripleu/TripleUApp.kt</code></li></ul><h3 id="what-it-does" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Keeps the accessibility service enabled so blocking features keep working.</li><li>Runs as a foreground service with a low-priority notification.</li></ul><h3 id="how-it-runs" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li>Watches <code>Settings.Secure.ACCESSIBILITY_ENABLED</code> and <code>ENABLED_ACCESSIBILITY_SERVICES</code>.</li><li>If the app service is missing, it writes it back into the enabled list.</li><li>Started on boot and also during app startup.</li></ul><h2 id="accessibility-settings-self-block" tabindex="-1">Accessibility settings self-block <a class="header-anchor" href="#accessibility-settings-self-block" aria-label="Permalink to &quot;Accessibility settings self-block&quot;">​</a></h2><h3 id="where-it-lives-1" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives-1" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/accessibility/AccessibilitySelfBlocker.kt</code></li><li><code>app/src/main/java/com/tripleu/accessibility/AppBlockAccessibilityService.kt</code></li></ul><h3 id="what-it-does-1" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does-1" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Prevents users from disabling the TripleU MDM accessibility service.</li><li>If the accessibility settings screen is detected, it backs out.</li></ul><h3 id="how-it-runs-1" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs-1" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li>Controlled by <code>accessibility_self_block_enabled</code> (prefs; enabled by default).</li><li>In <code>com.android.settings</code>, the service looks for: <ul><li>&quot;TripleU MDM&quot; text.</li><li>Toggle labels like &quot;Use TripleU MDM App Blocker&quot; (English/Hebrew).</li></ul></li><li>If both are found, it sends <code>GLOBAL_ACTION_BACK</code>.</li></ul><h2 id="screen-capture-dialog-auto-accept" tabindex="-1">Screen capture dialog auto-accept <a class="header-anchor" href="#screen-capture-dialog-auto-accept" aria-label="Permalink to &quot;Screen capture dialog auto-accept&quot;">​</a></h2><h3 id="where-it-lives-2" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives-2" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/accessibility/ScreenCaptureDialogAutoAcceptor.kt</code></li><li><code>app/src/main/java/com/tripleu/accessibility/AppBlockAccessibilityService.kt</code></li></ul><h3 id="what-it-does-2" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does-2" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Auto-clicks the MediaProjection consent dialog (Start/Allow/OK).</li><li>Makes remote support start faster without manual taps.</li></ul><h3 id="how-it-runs-2" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs-2" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li>Controlled by <code>AppBlockAccessibilityService.autoAcceptScreenCapture</code> (default true).</li><li>On accessibility events, it checks dialog keywords in English/Hebrew.</li><li>Requires a matching Cancel/Deny button to confirm it&#39;s a real capture dialog.</li><li>Clicks accept buttons (or their clickable parent) only when the dialog match is confirmed.</li></ul><h2 id="gboard-gif-search-blocker" tabindex="-1">Gboard GIF search blocker <a class="header-anchor" href="#gboard-gif-search-blocker" aria-label="Permalink to &quot;Gboard GIF search blocker&quot;">​</a></h2><h3 id="where-it-lives-3" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives-3" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/accessibility/GboardBlocker.kt</code></li><li><code>app/src/main/java/com/tripleu/accessibility/AppBlockAccessibilityService.kt</code></li></ul><h3 id="what-it-does-3" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does-3" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Closes the Gboard GIF/search media pane when enabled.</li></ul><h3 id="how-it-runs-3" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs-3" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li>Enabled by <code>gboard_gif_blocked=true</code> (prefs).</li><li>Finds the Gboard window and detects a search bar + search icon.</li><li>If detected, it triggers back three times to exit the pane.</li></ul><h2 id="accessibility-node-text-matcher" tabindex="-1">Accessibility node text matcher <a class="header-anchor" href="#accessibility-node-text-matcher" aria-label="Permalink to &quot;Accessibility node text matcher&quot;">​</a></h2><h3 id="where-it-lives-4" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives-4" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/accessibility/AccessibilityNodeUtils.kt</code></li></ul><h3 id="what-it-does-4" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does-4" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Recursively scans an accessibility node tree for keyword matches.</li><li>Checks both <code>text</code> and <code>contentDescription</code>.</li></ul><h3 id="how-it-runs-4" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs-4" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li><code>containsText(...)</code> walks children up to <code>maxDepth</code> (default 12).</li><li>Used by accessibility blockers that detect UI labels.</li></ul><h2 id="accessibility-screenshot-capturer-unused" tabindex="-1">Accessibility screenshot capturer (unused) <a class="header-anchor" href="#accessibility-screenshot-capturer-unused" aria-label="Permalink to &quot;Accessibility screenshot capturer (unused)&quot;">​</a></h2><h3 id="where-it-lives-5" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives-5" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/remote/AccessibilityScreenshotCapturer.kt</code></li></ul><h3 id="what-it-does-5" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does-5" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Implements a WebRTC <code>VideoCapturer</code> that uses the Accessibility screenshot API (API 33+).</li><li>Falls back to black frames when screenshots are unavailable.</li></ul><h3 id="how-it-runs-5" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs-5" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li>Not referenced elsewhere in the app right now.</li><li>When used, it calls <code>AppBlockAccessibilityService.requestScreenshot(...)</code> on a timer.</li></ul>',43)])])}const p=i(s,[["render",r]]);export{b as __pageData,p as default};
