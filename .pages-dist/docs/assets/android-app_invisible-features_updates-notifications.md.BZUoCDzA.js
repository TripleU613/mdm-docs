import{_ as a,c as i,o as t,ae as o}from"./chunks/framework.Cqi9LMMK.js";const p=JSON.parse('{"title":"Updates + notifications","description":"","frontmatter":{},"headers":[],"relativePath":"android-app/invisible-features/updates-notifications.md","filePath":"android-app/invisible-features/updates-notifications.md"}'),l={name:"android-app/invisible-features/updates-notifications.md"};function r(s,e,d,c,n,u){return t(),i("div",null,[...e[0]||(e[0]=[o('<h1 id="updates-notifications" tabindex="-1">Updates + notifications <a class="header-anchor" href="#updates-notifications" aria-label="Permalink to &quot;Updates + notifications&quot;">​</a></h1><h2 id="auto-update-checks" tabindex="-1">Auto update checks <a class="header-anchor" href="#auto-update-checks" aria-label="Permalink to &quot;Auto update checks&quot;">​</a></h2><h3 id="where-it-lives" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/updates/AutoUpdateManager.kt</code></li><li><code>app/src/main/java/com/tripleu/updates/UpdateCheckWorker.kt</code></li><li><code>app/src/main/java/com/tripleu/updates/UpdateMuteReceiver.kt</code></li></ul><h3 id="what-it-does" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Periodically checks for a newer APK and attempts silent install.</li><li>Shows a notification if install is blocked and updates are not muted.</li></ul><h3 id="how-it-runs" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li><code>AutoUpdateManager</code> schedules <code>UpdateCheckWorker</code> every 30 minutes after setup.</li><li>Worker reads <code>latestversion.txt</code> from GitHub and parses: <ul><li><code>versioncode: &lt;int&gt;</code></li><li><code>apk link: &lt;url&gt;</code></li></ul></li><li>If newer and device owner, it tries silent install via <code>PackageInstaller</code>.</li><li>If not installed, it posts a notification with a &quot;Don&#39;t show again&quot; action.</li><li><code>UpdateMuteReceiver</code> stores <code>update_alerts_muted=true</code> in <code>MDMSettings</code>.</li></ul><h2 id="aurora-device-spoofing" tabindex="-1">Aurora device spoofing <a class="header-anchor" href="#aurora-device-spoofing" aria-label="Permalink to &quot;Aurora device spoofing&quot;">​</a></h2><h3 id="where-it-lives-1" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives-1" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/updates/PlayDeviceSpoofManager.kt</code></li><li><code>app/src/main/java/com/tripleu/updates/NativeDeviceInfoProvider.kt</code></li><li><code>app/src/main/java/com/tripleu/updates/PlayAuthStore.kt</code></li><li><code>app/src/main/java/com/tripleu/updates/AuroraUpdateRepository.kt</code></li></ul><h3 id="what-it-does-1" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does-1" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Builds a device profile used to authenticate with the Aurora GPlay API.</li><li>Caches auth tokens and refreshes them periodically.</li></ul><h3 id="how-it-runs-1" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs-1" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li><code>AuroraUpdateRepository</code> calls <code>PlayDeviceSpoofManager.initialize()</code> on init.</li><li><code>PlayDeviceSpoofManager</code> caches a Properties snapshot from <code>NativeDeviceInfoProvider</code>.</li><li>Profile selection: <ul><li>Uses a Pixel profile if the device is Huawei or not already Google-branded.</li><li>If the profile is still &quot;native&quot;, it overwrites to Pixel 7 values and sets <code>Spoof.Profile=pixel7</code>.</li></ul></li><li>Auth data is cached in <code>play_update_auth</code> via <code>PlayAuthStore</code>.</li><li><code>AuroraUpdateRepository</code> refreshes auth if: <ul><li>No cached token.</li><li>The token is older than 1 hour.</li><li>A validation call fails.</li></ul></li><li>On auth failure, it refreshes the spoof profile (<code>reason=auth_failure_&lt;code&gt;</code>).</li></ul><h2 id="notification-channels" tabindex="-1">Notification channels <a class="header-anchor" href="#notification-channels" aria-label="Permalink to &quot;Notification channels&quot;">​</a></h2><h3 id="where-it-lives-2" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives-2" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h3><ul><li><code>app/src/main/java/com/tripleu/vpn/NotificationChannels.java</code></li><li><code>app/src/main/java/com/tripleu/vpn/AdVpnService.java</code></li><li><code>app/src/main/java/com/tripleu/updates/UpdateCheckWorker.kt</code></li><li><code>app/src/main/java/com/tripleu/appcontrol/AppMonitorService.kt</code></li><li><code>app/src/main/java/com/tripleu/TripleUApp.kt</code></li></ul><h3 id="what-it-does-2" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does-2" aria-label="Permalink to &quot;What it does&quot;">​</a></h3><ul><li>Creates notification channel groups for service status and update status.</li><li>Used by VPN, app monitor, and update checks.</li></ul><h3 id="how-it-runs-2" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs-2" aria-label="Permalink to &quot;How it runs&quot;">​</a></h3><ul><li><code>NotificationChannels.onCreate()</code> is called at app start and by services.</li><li>Groups: <ul><li><code>notifications.service</code> (running/paused).</li><li><code>notifications.update</code> (update status).</li></ul></li><li>Channel IDs are used by foreground services and host file update notifications.</li></ul>',22)])])}const f=a(l,[["render",r]]);export{p as __pageData,f as default};
