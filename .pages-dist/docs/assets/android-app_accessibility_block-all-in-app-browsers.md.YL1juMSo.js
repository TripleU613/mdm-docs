import{_ as i,c as l,o,ae as a}from"./chunks/framework.Cqi9LMMK.js";const u=JSON.parse('{"title":"Block all in-app browsers","description":"","frontmatter":{},"headers":[],"relativePath":"android-app/accessibility/block-all-in-app-browsers.md","filePath":"android-app/accessibility/block-all-in-app-browsers.md"}'),t={name:"android-app/accessibility/block-all-in-app-browsers.md"};function s(c,e,r,n,d,p){return o(),l("div",null,[...e[0]||(e[0]=[a('<h1 id="block-all-in-app-browsers" tabindex="-1">Block all in-app browsers <a class="header-anchor" href="#block-all-in-app-browsers" aria-label="Permalink to &quot;Block all in-app browsers&quot;">​</a></h1><h2 id="where-it-lives" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h2><ul><li><code>app/src/main/java/com/tripleu/ui/fragments/PrivacyFragment.kt</code></li><li><code>app/src/main/java/com/tripleu/accessibility/AppBlockAccessibilityService.kt</code></li><li><code>app/src/main/java/com/tripleu/accessibility/InAppBrowserBlocker.kt</code></li><li><code>app/src/main/java/com/tripleu/network/FirewallManager.kt</code></li></ul><h2 id="what-it-does" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does" aria-label="Permalink to &quot;What it does&quot;">​</a></h2><ul><li>Blocks WebView/in-app browser surfaces by backing out of the current screen.</li><li>In global mode, blocks all apps except those in the WebView exception list.</li></ul><h2 id="when-disabled" tabindex="-1">When disabled <a class="header-anchor" href="#when-disabled" aria-label="Permalink to &quot;When disabled&quot;">​</a></h2><ul><li><code>webview_block_all=false</code>.</li><li>Only apps in <code>firewall_rules.webview_blocklist</code> are blocked.</li><li>This list is populated by the Apps tab action: &quot;Block in-app browser&quot;.</li></ul><h2 id="when-enabled" tabindex="-1">When enabled <a class="header-anchor" href="#when-enabled" aria-label="Permalink to &quot;When enabled&quot;">​</a></h2><ul><li><code>webview_block_all=true</code>.</li><li>All apps are blocked unless they are in <code>firewall_rules.webview_exceptionlist</code>.</li><li>The exception list is populated by the Apps tab action: &quot;Add WebView exception&quot;.</li></ul><h2 id="how-it-runs" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs" aria-label="Permalink to &quot;How it runs&quot;">​</a></h2><ul><li>Toggle sets <code>webview_block_all</code> (prefs) and <code>accessibility.webview_block_all</code> (<code>ConfigStore</code>).</li><li><code>InAppBrowserBlocker</code> reads: <ul><li>Prefs <code>firewall_rules</code> -&gt; <code>webview_blocklist</code> for per-app blocks.</li><li>Prefs <code>firewall_rules</code> -&gt; <code>webview_exceptionlist</code> for per-app exceptions.</li></ul></li><li><code>AppBlockAccessibilityService</code> calls <code>inAppBrowserBlocker.handle(...)</code> for most apps (not WhatsApp, Google Messages, or Settings).</li><li>Detection signals: <ul><li>Known browser packages.</li><li>WebView-related class names (<code>android.webkit.WebView</code>, <code>WebViewChromium</code>, <code>GeckoView</code>, etc.).</li><li>Browser chrome view IDs (URL bar/toolbar) or action labels containing &quot;navigate&quot;, &quot;url&quot;, &quot;address&quot;.</li></ul></li><li>If WebView content is detected, it sends <code>GLOBAL_ACTION_BACK</code>.</li><li>If not, it searches for clickable nodes with content descriptions like &quot;close&quot;/&quot;done&quot;/&quot;dismiss&quot; and then sends back.</li><li>Enabling the toggle shows the accessibility-required dialog if the service is off.</li></ul>',11)])])}const h=i(t,[["render",s]]);export{u as __pageData,h as default};
