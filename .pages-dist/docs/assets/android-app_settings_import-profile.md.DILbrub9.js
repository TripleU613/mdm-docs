import{_ as i,c as o,o as t,ae as a}from"./chunks/framework.Cqi9LMMK.js";const u=JSON.parse('{"title":"Import profile","description":"","frontmatter":{},"headers":[],"relativePath":"android-app/settings/import-profile.md","filePath":"android-app/settings/import-profile.md"}'),l={name:"android-app/settings/import-profile.md"};function r(s,e,n,d,c,p){return t(),o("div",null,[...e[0]||(e[0]=[a('<h1 id="import-profile" tabindex="-1">Import profile <a class="header-anchor" href="#import-profile" aria-label="Permalink to &quot;Import profile&quot;">​</a></h1><h2 id="where-it-lives" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h2><ul><li><code>app/src/main/java/com/tripleu/ui/fragments/SettingsFragment.kt</code></li><li><code>app/src/main/java/com/tripleu/config/ProfileBackupManager.kt</code></li><li><code>app/src/main/java/com/tripleu/config/ConfigStore.kt</code></li></ul><h2 id="what-it-does" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does" aria-label="Permalink to &quot;What it does&quot;">​</a></h2><ul><li>Imports a previously exported profile file.</li><li>Applies settings into <code>ConfigStore</code> and shows how many were applied.</li><li>Applies per-app policy flags included in the profile.</li><li>Warns if VPN consent is missing after a profile enables VPN or whitelist.</li></ul><h2 id="how-it-runs" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs" aria-label="Permalink to &quot;How it runs&quot;">​</a></h2><ul><li><code>importProfileLauncher</code> uses <code>OpenDocument()</code> and accepts <code>application/octet-stream</code> and <code>*/*</code>.</li><li><code>ProfileBackupManager.import()</code>: <ul><li>Decrypts the file and parses the JSON array.</li><li>Skips entries with blank keys or keys containing <code>pin</code> or <code>auth</code>.</li><li>Applies values based on <code>type</code> (<code>bool</code>, <code>int</code>, <code>long</code>, <code>json</code>, <code>string</code>).</li><li>Applies <code>apps[]</code> policy flags (hide/suspend/uninstall/network/webview/video + approved).</li><li>Writes app snapshots to Firestore via <code>AppSnapshotStorage</code>.</li><li>Restarts the main VPN if any imported app is <code>networkBlocked</code>.</li></ul></li><li>On success, <code>maybeNotifyMissingVpnConsent()</code> checks: <ul><li><code>network.vpn_enabled</code> or <code>network.domain_whitelist_enabled</code> in <code>ConfigStore</code>.</li><li>If enabled but VPN permission is missing, it shows a toast.</li></ul></li></ul>',7)])])}const m=i(l,[["render",r]]);export{u as __pageData,m as default};
