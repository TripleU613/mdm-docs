import{_ as i,c as t,o,ae as a}from"./chunks/framework.Cqi9LMMK.js";const v=JSON.parse('{"title":"PIN recovery","description":"","frontmatter":{},"headers":[],"relativePath":"android-app/onboarding/pin-recovery.md","filePath":"android-app/onboarding/pin-recovery.md"}'),r={name:"android-app/onboarding/pin-recovery.md"};function c(l,e,s,n,d,u){return o(),t("div",null,[...e[0]||(e[0]=[a('<h1 id="pin-recovery" tabindex="-1">PIN recovery <a class="header-anchor" href="#pin-recovery" aria-label="Permalink to &quot;PIN recovery&quot;">​</a></h1><h2 id="where-it-lives" tabindex="-1">Where it lives <a class="header-anchor" href="#where-it-lives" aria-label="Permalink to &quot;Where it lives&quot;">​</a></h2><ul><li><code>app/src/main/java/com/tripleu/ui/activities/AuthActivity.kt</code></li><li><code>app/src/main/java/com/tripleu/ui/activities/AccountLoginActivity.kt</code></li><li><code>app/src/main/java/com/tripleu/ui/activities/ResetPinActivity.kt</code></li></ul><h2 id="what-it-does" tabindex="-1">What it does <a class="header-anchor" href="#what-it-does" aria-label="Permalink to &quot;What it does&quot;">​</a></h2><ul><li>Provides two recovery paths: <ul><li>Server-side recovery PIN validation.</li><li>Email + password verification to reset the PIN.</li></ul></li></ul><h2 id="how-it-runs" tabindex="-1">How it runs <a class="header-anchor" href="#how-it-runs" aria-label="Permalink to &quot;How it runs&quot;">​</a></h2><ul><li>When PIN verification fails or <code>is_locked_out=true</code>, AuthActivity calls: <ul><li>Firebase Function <code>validateRecoveryPin</code> with <code>{ deviceId, enteredPin }</code>.</li><li>If no user is logged in, it signs in anonymously first.</li><li>On success, clears <code>is_locked_out</code> and <code>mdm_pin</code>, then restarts AuthActivity.</li></ul></li><li>&quot;Forgot PIN&quot; opens <code>AccountLoginActivity</code>: <ul><li>Verifies email + password with Firebase Auth.</li><li>Launches <code>ResetPinActivity</code> in recovery mode (<code>RECOVERY_RESET=true</code>).</li><li>Has a &quot;Forgot password&quot; link that sends a Firebase reset email.</li></ul></li><li><code>ResetPinActivity</code> lets the user set a new 4+ digit PIN without the old PIN.</li></ul>',7)])])}const p=i(r,[["render",c]]);export{v as __pageData,p as default};
